---
description: 从每日笔记中智能提取重要知识点，创建独立的结构化知识条目
---

请帮我从每日笔记中提取知识条目。

**源文件**: $ARGUMENTS (可选，默认今日)

## 执行步骤

### 1. 读取每日笔记
- 读取指定日期的每日笔记文件
- 格式: `daily-notes/YYYY-MM-DD.md`
- 如果未指定日期，使用今日日期
- 如果文件不存在，提示错误并退出

### 2. 智能识别知识点
分析笔记内容，识别可提取的知识点。检测以下特征：

#### 2.1 重要内容特征
- 标记为 `#重要` 的内容
- 标记为 `⭐⭐⭐⭐⭐` (5星) 的内容
- 标记为 `#待深入` 的内容

#### 2.2 技术内容特征
- 包含代码块（```language）的内容
- 有明确定义和解释的概念
- 包含实际应用说明的内容
- 有结构化标题（##、###）的内容

#### 2.3 学习笔记特征
- 包含"核心概念"、"关键特点"等标题的内容
- 包含"工作原理"、"应用场景"等说明的内容
- 包含"笔记"、"思考"、"总结"等关键词的内容

### 3. 对每个识别的知识点

#### 3.1 去重判断
搜索知识库中是否已存在相似内容：
- 搜索标题相似的知识条目
- 搜索包含相同关键词的条目
- 比较内容相似度（阈值：70%）

判断结果：
- **新知识**: 不存在相似内容，创建新条目
- **已存在**: 发现高度相似内容，询问用户
  - 选项1: 跳过（不提取）
  - 选项2: 更新现有条目
  - 选项3: 合并到现有条目
- **相关内容**: 存在相关但不完全相同的内容
  - 选项1: 创建新条目并建立关联
  - 选项2: 更新现有条目的相关部分

#### 3.2 确定分类和标签
根据内容自动判断：
- **分类** (category):
  - 提及 "Agent", "LLM", "AI" → `ai-ml/agent`
  - 提及 "React", "JavaScript" → `programming/react`
  - 提及 "Python" → `programming/python`
  - 提及 "数据库", "SQL" → `tech-knowledge/database`
  - 提及 "Git" → `tech-knowledge/git`

- **标签** (tags):
  - 从内容中提取3-7个关键词
  - 包含领域标签（如 #AI, #React）
  - 包含技术标签（如 #JavaScript, #Hooks）
  - 包含状态标签（如 #重要, #实践）

#### 3.3 评估重要性和难度
- **重要性** (mastery 初始值):
  - 包含实践项目或代码示例 → 初始 4星
  - 标记为 #重要 → 初始 4星
  - 深入解释的概念 → 初始 3星
  - 简单记录 → 初始 2星

- **难度** (difficulty):
  - 包含复杂代码或概念 → 4-5星
  - 需要多步理解 → 3-4星
  - 基础概念 → 1-2星

#### 3.4 使用 MCP 补充内容（可选）
对于提取的知识点，可以使用 MCP 补充更完整的内容：

```markdown
## 🔍 使用 MCP 补充知识内容

### 📚 Wikipedia 补充（基础知识）
对于概念性的知识点：
- 调用: wikipedia MCP
- 搜索: 知识点主题
- 补充: 定义、历史背景、相关概念

### 🌐 Exa 搜索（技术细节）
对于技术类知识点：
- 调用: exa MCP
- 搜索: 知识点 + "examples" + "best practices"
- 补充: 代码示例、最佳实践、常见问题

### 🔎 网络搜索（最新资料）
对于需要最新信息的内容：
- 调用: open-websearch MCP
- 搜索: 知识点 + "2024" + "2025"
- 补充: 最新发展趋势、更新内容

### 补充选项
1. ✅ 全部补充（推荐）- 使用所有可用 MCP
2. 📚 仅 Wikipedia - 仅补充基础知识
3. 🌐 仅技术搜索 - 仅补充技术内容
4. ⏭️ 跳过补充 - 使用原始提取内容

选择 (1/2/3/4):
```

### 4. 使用模板创建知识条目

#### 4.1 填充元数据
```yaml
---
title: [知识条目标题]
category: [自动判断的分类]
tags: [提取的标签列表]
created: [笔记日期]
updated: [今日日期]
mastery: [初始掌握度]
difficulty: [评估的难度]
review_dates:
  - [计算第1次复习: 创建日期+1天]
  - [计算第2次复习: 创建日期+3天]
  - [计算第3次复习: 创建日期+1周]
  - [计算第4次复习: 创建日期+2周]
  - [计算第5次复习: 创建日期+1月]
status: learning
related:
  - [相关条目1]
  - [相关条目2]
---
```

#### 4.2 组织内容结构
根据模板结构组织：
- 核心概念（定义、特点）
- 详细解释（工作原理、应用场景）
- 代码示例（如果有）
- 相关概念
- 深入学习资源
- 个人笔记

### 5. 建立知识关联

#### 5.1 添加反向链接
- 在源笔记中添加"已整理"标记
- 在源笔记中添加指向新知识条目的链接
- 格式: `✅ 已整理为知识条目: [标题](链接)`

#### 5.2 建立知识点之间的关联
- 识别新条目中提到的其他概念
- 搜索知识库中包含这些概念的条目
- 在相关条目的 `related` 字段中添加新条目
- 在新条目的 `related` 字段中添加相关条目

### 6. 交互式确认

对每个识别的知识点，询问用户：
```markdown
### 🔍 知识点 1/3: React Server Components

**识别的信息**:
- 类型: 新知识
- 重要性: ⭐⭐⭐⭐⭐
- 内容完整度: 95%
- 建议分类: programming/react
- 建议标签: [React, ServerComponents, NextJS, WebDev]
- 初始掌握度: ⭐⭐⭐
- 难度: ⭐⭐⭐⭐

**内容预览**:
[显示前200字的内容...]

**操作选项**:
1. ✅ 创建新条目（推荐）
2. ✏️ 编辑后再创建
3. 🔄 更新现有条目
4. ⏭️ 跳过此知识点
5. ❌ 取消提取

选择 (1/2/3/4/5):
```

### 7. 生成提取报告

完成所有提取后，显示报告：
```markdown
## ✅ 提取完成报告

### 📊 统计信息
- 扫描内容: 2025-12-12.md (2500字)
- 识别知识点: 5个
- 创建新条目: 3个
- 更新现有条目: 1个
- 跳过: 1个

### ✅ 创建的文件
1. **programming/react/react-server-components.md**
   - 分类: programming/react
   - 标签: #React #ServerComponents #NextJS
   - 掌握度: ⭐⭐⭐
   - 复习计划: 已设置5次复习

2. **ai-ml/agent/agent-skills.md**
   - 分类: ai-ml/agent
   - 标签: #AI #Agent #ClaudeCode #Skills
   - 掌握度: ⭐⭐⭐⭐
   - 复习计划: 已设置5次复习

3. **tech-knowledge/git/hooks.md**
   - 分类: tech-knowledge/git
   - 标签: #Git #DevOps #Automation
   - 掌握度: ⭐⭐
   - 复习计划: 已设置5次复习

### 🔄 更新的文件
1. **ai-ml/agent/ai-agent-basics.md**
   - 更新内容: 添加了 Agent Skills 部分
   - 原掌握度: ⭐⭐⭐
   - 新掌握度: ⭐⭐⭐⭐

### 🔗 建立的关联
- 添加了 6 个双向链接
- 识别了 4 个相关概念
- 发现了 2 个潜在的前置知识

### 📝 源笔记更新
已在 `daily-notes/2025-12-12.md` 中添加:
- ✅ 已整理标记
- 🔗 知识条目链接
- 📊 提取统计信息

### 💡 后续建议

1. **立即复习** (巩固记忆):
   - /review react-server-components
   - /review agent-skills

2. **建立关联** (知识网络):
   - /connect react-server-components
   - /connect agent-skills

3. **更新复习计划**:
   - /plan-review

### 🚀 下一步操作
选择:
1. 立即开始复习第一个知识点
2. 查看某个创建的知识条目
3. 继续处理其他日期的笔记
4. 完成提取

选择 (1/2/3/4):
```

## 高级功能

### 批量提取
支持一次性提取多日笔记：
```bash
/extract 2025-12-10 2025-12-11 2025-12-12
# 或
/extract --batch --from=2025-12-01 --to=2025-12-07
```

### 自动模式
跳过交互确认，自动提取所有内容：
```bash
/extract 2025-12-12 --auto
```

### 仅预览模式
不实际创建文件，仅显示将要提取的内容：
```bash
/extract 2025-12-12 --preview
```

## 注意事项

1. **内容质量**:
   - 确保提取的内容完整且有深度
   - 如果内容过于简略，提示用户补充
   - 优先提取结构化、有代码示例的内容

2. **去重准确性**:
   - 使用模糊匹配判断相似度
   - 注意区分相同概念的不同版本
   - 当不确定时，询问用户

3. **元数据准确性**:
   - 自动判断可能不准确，允许用户修改
   - 分类和标签应保持一致性
   - 复习日期计算要准确

4. **文件命名**:
   - 使用小写字母和连字符
   - 简洁明了，反映主题
   - 避免使用特殊字符
   - 示例: `react-server-components.md`

5. **错误处理**:
   - 如果笔记文件不存在，提示错误
   - 如果模板文件不存在，使用默认结构
   - 如果创建文件失败，记录错误并继续
   - 所有操作完成后显示报告

## 相关命令

- `/daily-note` - 创建每日笔记
- `/review [主题]` - 复习特定主题
- `/connect [主题]` - 建立知识关联
- `/organize` - 整理知识库
